<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PR Shepherd</title>
  <link rel="stylesheet" href="sidebar.css">
</head>
<body>
  <div class="sidebar-container">
    <header class="sidebar-header">
      <div class="header-content">
        <h1>üêë PR Shepherd</h1>
        <div class="repo-info">vllm-project/vllm</div>
      </div>
      <div class="header-actions">
        <button id="settings-btn" class="header-btn" title="Settings">
          ‚öôÔ∏è
        </button>
        <button id="refresh-btn" class="refresh-btn" title="Refresh PRs">
          <svg width="16" height="16" viewBox="0 0 16 16">
            <path fill="currentColor" d="M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z"/>
          </svg>
        </button>
      </div>
    </header>
    
    <div class="auth-section" id="auth-section">
      <div class="auth-content">
        <div class="auth-header">
          <h2>üîê Connect to GitHub</h2>
          <p>Securely connect your GitHub account to start shepherding your PRs</p>
        </div>
        
        <div class="auth-methods">
          <button id="oauth-btn" class="btn primary oauth-btn">
            <svg width="20" height="20" viewBox="0 0 16 16" class="auth-icon">
              <path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
            </svg>
            Connect with GitHub
          </button>
          
          <div class="auth-divider">
            <span>or</span>
          </div>
          
          <button id="pat-btn" class="btn secondary">
            <svg width="16" height="16" viewBox="0 0 16 16" class="auth-icon">
              <path fill="currentColor" d="M9 12h1v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-4h1a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H4V6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1H9a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1ZM6 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"/>
            </svg>
            Use Personal Access Token
          </button>
        </div>

        <div class="auth-status" id="auth-status" style="display: none;">
          <div class="loading-spinner"></div>
          <span id="auth-status-text">Connecting...</span>
        </div>

        <div class="auth-help">
          <details>
            <summary>Why do we need GitHub access?</summary>
            <ul>
              <li>View your pull requests and review assignments</li>
              <li>Check CI status and review information</li>
              <li>Read team memberships (with read:org scope)</li>
              <li>All data stays local - we don't store anything on external servers</li>
            </ul>
          </details>
        </div>
      </div>
    </div>
    
    <div class="main-content" id="main-content" style="display: none;">
      <div class="search-section">
        <input type="text" id="search-input" placeholder="üîç Search PRs..." class="search-input">
        <div class="view-options">
          <label class="checkbox-label">
            <input type="checkbox" id="reviewer-only" checked>
            <span>My reviews only</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="include-teams">
            <span>Include team requests</span>
          </label>
        </div>
      </div>
      
      <div class="filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="untagged">Untagged</button>
        <div id="user-tag-filters"></div>
        <button class="create-tag-btn" id="create-tag-btn" title="Create new tag">
          <svg width="12" height="12" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm7-3.25v2.75h2.75a.75.75 0 0 1 0 1.5H8.5v2.75a.75.75 0 0 1-1.5 0V9.25H4.25a.75.75 0 0 1 0-1.5H7V5a.75.75 0 0 1 1.5 0Z"/>
          </svg>
          Add Tag
        </button>
        <button id="manage-tags-btn" class="manage-tags-btn" title="Manage tags">
          ‚öôÔ∏è
        </button>
      </div>
      
      <div class="pr-list" id="pr-list">
        <div class="loading">Loading your PRs...</div>
      </div>
    </div>
    
    <footer class="sidebar-footer">
      <div class="rate-limit-info" id="rate-limit-info"></div>
      <div class="last-update" id="last-update"></div>
    </footer>
  </div>

  <!-- Custom Modal -->
  <div class="modal-overlay" id="modal-overlay" style="display: none;">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="modal-title"></h3>
        <button class="modal-close" id="modal-close">‚úï</button>
      </div>
      <div class="modal-body" id="modal-body"></div>
      <div class="modal-footer" id="modal-footer"></div>
    </div>
  </div>
  
  <script src="oauth.js"></script>
  <script src="sidebar.js"></script>
</body>
</html>